\section{Basic set theory}
\label{sec:basic_set_theory}
In modern mathematics we do not define a set or set membership, but rather believe that there exists objects with properties that are listed in this chapter.
Heuristically you can think that a set $A$ is a "collection of objects" and a sentence "$x\in A$" means that the object $x$ is inside this collection. We read this as
"$x$ belongs to set $A$" or "$x$ is an element of $A$". We write $x\notin A$ as a shorthand for $\neg (x\in A)$ (and it means that $x$ is \textit{not} an element of $A$).

\begin{example}
  % Sets - example of set API using a library
  Consider a library with closed stack and with a webpage. You can check whether there is a specific book inside it -
  so you can know for example that "Alice's Adventures in Wonderland"
  is in the stack, but you don't know how many copies there are. Moreover you can't ask about place of the books - there is no concept as being "first" or "second" element,
  as we can't check the physical stack.
\end{example}

As we can discover, there are collections of objects that do not form a set:
\begin{prob}
  % Russel's paradox - no set of all sets
  \textbf{Russel's paradox}
  Let $X$ be a set built from all sets such that $A\notin A.$ Prove that $X$ does not exist. [Hint\footnote{What if $X\in X$? What if $X\notin X$?}]
\end{prob}

Therefore we need to assume the existence of a few sets, and then construct new out of them using some rules in which we believe. We assume that there exist:

\begin{enumerate}
  \item finite sets (like real libraries with finite number of books). These are written as $\{a_1,a_2,\dots,a_n\}$. Empty set is written as $\emptyset$ rather than $\{\}$.
	\item real numbers\footnote{You may feel a bit insecure - what are real numbers, integers and so on? We haven't defined them properly yet.
    We will defer the construction of them to later sections, as what really matters are they \textit{properties} that you learned in elementary school.} $\mathbb R$
	\item natural numbers $\mathbb N=\{0,1,2,\dots\}$
	\item integers $\mathbb Z$
	\item rational numbers $\mathbb Q$
\end{enumerate}

Having a few sets, we define a few rules how to compare them and construct new sets out of them:

\begin{definition}
  % Equality of sets
  \textbf{Axiom of extensionality (Equality of sets)} We say that two sets $A$, $B$ are \textbf{equal} iff they have the same elements, that is:
  $$A=B\Leftrightarrow \forall_x (x\in A \Leftrightarrow x\in B).$$
\end{definition}

\begin{definition}
  % Subset and superset definitions
  We say that $A$ \textbf{is a subset of} $B$ iff every element of $A$ is also in $B$, that is:
  $$A\subseteq B \Leftrightarrow \forall_a (a\in A\Rightarrow a\in B).$$
  If $A$ is a subset of $B$, we also say that $B$ \textbf{is a superset} of $A$.
\end{definition}

% Improvement in quantifier notation
This is a good opportunity to slightly modify our quantifier notation - usually we will be interested in objects belonging to some sets.
Formula $$\forall_{a\in A} P(a)$$ means "for all $a\in A$, statement $P(a)$ is true"
and $$\exists_{a\in A} P(a)$$ means "there is an $a\in A$ such that $P(a)$ holds".

\begin{example}
  % Improved quantifier notation in subset definition
  We can write $A\subseteq B \Leftrightarrow \forall_{a\in A} a\in B$.
\end{example}

\begin{exercise}
  % Equality using subsets
  Let $A$ and $B$ be two sets. Prove that $A=B$ iff $A$ is a subset of $B$ and $B$ is a subset of $A$.
\end{exercise}

\begin{exercise}
  % Empty set uniqueness property
  Here we will prove that the empty set is a unique set with special property of being a subset of every set:
  \begin{enumerate}
    \item Prove that for every set $A$, $\emptyset\subseteq A$.
    \item Let $\theta$ be a set such that $\theta \subseteq A$ for every set $A$. Prove that $\theta=\emptyset$.
  \end{enumerate}
\end{exercise}

\subsection{New sets from old}
At the moment we do not have many sets. Let's try to define some methods of creating new sets from the know ones:

\begin{definition}
  % Selecting elements
  \textbf{Axiom schema of specification} Consider a set $A$ and a statement that assigns a truth value $P(a)$ to each $a\in A$. We can select elements $a$
  for which formula $P(a)$ is true and create a set\footnote{Some authors write $\{a\in A\,|\,P(a)\}$}:
  $$\{a\in A : P(a)\}.$$
\end{definition}

\begin{example}
  % Example with empty set
  We assumed that the set $\R$ (of real numbers) exist. We can construct the empty set using the axiom schema of specification:
  $$\emptyset=\{r\in\R : r=r+1\}.$$
\end{example}

The above axiom schema of specification is important - using this we can prove that there is no set of all sets:
\begin{exercise}
  % No set of all sets
  Prove that there is \textit{no} set of all sets. [Hint\footnote{Assume there is one and select some elements to create Russel's paradox.}]
\end{exercise}

Although is is impossible to create the set of all sets, it is possible to create \textit{some} sets of sets.

\begin{definition}
  % Axiom of power set
  \textbf{Axiom of power set} Consider a set $A$. We assume that there exists
  \footnote{We cannot create it using the axiom schema of specification, as there is no set from which we could select subsets of $A$. But since now, we can do it.}
  \textbf{the power set of $A$} defined as a set of all subsets of $A$:
  $$\mathcal P(A):=\{A' : A'\subseteq A\}.$$
  That is $A'\in \mathcal P(A)$ iff $A'\subseteq A$.
\end{definition}

\begin{exercise}
  % Selection of subsets with special property
  Using the axiom of power set and the axiom schema of specification, justify the notation:
  $$\{A'\subseteq A : P(A')\},$$
  where $P(A')$ assigns true or false to each subset $A'$ of $A$.
\end{exercise}

\begin{exercise}
  % Number of elements in a power set
  \begin{enumerate}
    \item Let $A=\{1,2,3\}$. Find it's power set $\mathcal P(A)$. What is the number of elements in $\mathcal P(A)$? How is it related to the
      number of elements of $A$?
    \item Let $A$ be a finite set with $n$ elements. Prove that $\mathcal P(A)$ has $2^n$ elements.
      Do you see why some authors write $2^A$ for $\mathcal P(A)$?
      \hint{Every subset is specified by elements that are inside it. For every element you have two options - to select it or not.}
  \end{enumerate}
\end{exercise}

\begin{definition}
  % Definition of a family of sets
  By a \textbf{collection of sets} or \textbf{family of sets} we understand a set of some sets.
\end{definition}

\begin{definition}
  % Unions of sets
  \textbf{Axiom of union} Assume that we are given a family of sets $A$. There is a set called their \textbf{union}\footnote{Again, we cannot use the axiom schema of specification as there is no set containing \emph{everything}.}:
  $$\bigcup \mathcal A = \{x : \exists_{X\in \mathcal A} x\in X\}.$$
  If the family of sets is indexed by some index, that is: $\mathcal A = \{A_i : i\in I\}$, we can also write:
  $$\bigcup_{i\in I} A_i := \bigcup \mathcal A.$$
\end{definition}

\begin{exercise}
  % Finite unions
  Let $A$, $B$ and $C$ be sets. Prove that:
  \begin{enumerate}
    \item union defined as $A\cup B=\{x : x\in A \vee x\in B\}$ agrees with $\bigcup \{A, B\}$
    \item $A\cup B = B\cup A$ (so union is commutative)
    \item $(A\cup B)\cup C = \bigcup \{A,B,C\}$
    \item $(A\cup B)\cup C = A\cup (B\cup C)$ (this is called associativity)
    \item $A\cup A=A$
  \end{enumerate}
\end{exercise}

\begin{definition}
  % Set difference - definition
  \textbf{Set difference} Let $A$ and $B$ be two sets. We define their \textbf{difference}:
  $$A\setminus B := A-B := \{a \in A : a\notin B\}$$
\end{definition}

\begin{example}
  Let $A=\{1,2,3\}$ and $B=\{2,3,4\}$. Then $A\setminus B = \{1\}$.
\end{example}

\begin{exercise}
  Is $(A\setminus B) \cup B$ always equal to $A$?
\end{exercise}

\begin{exercise}
  % Using set difference and unions
  Let $A$ and $B$ be sets. Prove that $A\subseteq (A\setminus B)\cup B$, where the equality holds iff $B\subseteq A$.
\end{exercise}

\begin{definition}
  % Intersection of sets
  Consider a family of sets $\mathcal A$. We define their \textbf{intersection} as a set:
  $$\bigcap \mathcal A = \left\{x\in \bigcup \mathcal A : \forall_{X\in\mathcal A}\, x\in X\right\}.$$
  If the family of sets is indexed by some index, that is: $\mathcal A = \{A_i : i\in I\}$, we can write:
  $$\bigcap_{i\in I} A_i := \bigcap \mathcal A.$$
\end{definition}

\begin{exercise}
  % Easy exercise for finding an infinite intersection. Maybe too easy.
	Find sum and intersection of family of subsets of $\mathbb R$:
  $$A_r=\{r, -r\}$$ for $r\ge 0.$
\end{exercise}

\begin{exercise}
  % Properties of finite intersections
	Let $A,\,B,\,C$ be sets. Writing $A\cap B := \bigcap \{A,B\}$, prove that:
	\begin{enumerate}
		\item $A\cap B=B\cap A$ (commutativity)
		\item $A\cap (B\cap C)=(A\cap B)\cap C$ (associativity)
    \item $A\cap A=A$
	\end{enumerate}
\end{exercise}

\begin{exercise}
  % Distributivity of intersection and union
  Prove distributivity:
  \begin{enumerate}
    \item $A\cap (B\cup C)=(A\cap B)\cup (A\cap C)$
    \item $A\cup (B\cap C)=(A\cup B)\cap (A\cup C)$
  \end{enumerate}
\end{exercise}

% \noindent Moreover, we will introduce two new symbols, called positive and negative infinity:
% $\infty$ and $-\infty$.
% These are \textit{not} real numbers, just symbols that are used to name a few useful sets:
%
% \begin{align*}
% 	(-\infty,b) &= \{x\in \mathbb R : x < b\}\\
% 	(-\infty,b] &= \{x\in \mathbb R : x \ge b\}\\
% 	(a,\infty)  &= \{x\in \mathbb R : a < x\}\\
% 	[a,\infty)  &= \{x\in \mathbb R : a \le x\}
% \end{align*}

\subsection{Subsets and complements}
\begin{definition}
  % Complement of a set
  Let $A$ be subset of a set $U$. We say that \textbf{the complement\footnote{We need to refer to some $U$ that usually will be clear out from the context.}
  of $A$} is a set $A^c=U\setminus A$.
\end{definition}


\begin{prob}
	Prove the following set identites:
	\begin{enumerate}
		\item Let $A\subseteq U.$ Prove that $(A^c)^c = A$.
		\item Let $A,\, B\subset U$. Prove that $(A\cup B)^c = A^c\cap B^c$
		\item Let $A,\, B\subset U$. Prove that $(A\cap B)^c = A^c\cup B^c$
		% \item $\{a\in A : a\in B\} = \{b\in B : b\in A\}$
	\end{enumerate}
\end{prob}

\begin{prob}
  % Useful lemma for cofinite topology
	Let $\mathcal X \subseteq \mathcal P(U)$ be a family of sets and define:
  $\mathcal Y=\{X^c\subseteq U : X\in \mathcal X\}$, where $X^c=U\setminus X$.
  Prove that:
  \begin{enumerate}
    \item $(\bigcup \mathcal X)^c = \bigcap \mathcal Y$
    \item $(\bigcap \mathcal X)^c = \bigcup \mathcal Y$
  \end{enumerate}
\end{prob}

\begin{exercise}
	Let $A\subseteq X_i$ for $i\in I$. Prove that
	$$A\subseteq \bigcap_{i\in I} X_i$$
\end{exercise}

\begin{exercise}
  % Useful lemma for classification of open sets using neighborhoods.
	For every point $a\in A$ there is a set $U_a\subseteq A$ such that $a\in U_a$.
	Prove that $$A=\bigcup_{a\in A} U_a.$$
\end{exercise}

\subsection{Cartesian product}
First of all, we need a useful concept:
\begin{definition}
  We define \textbf{an ordered pair} or \textbf{a 2-tuple} as
  $$(a,b) := \{\{a\}, \{a, b\}\}.$$
\end{definition}

\begin{exercise}
  Prove that $(a,b)=(a',b')$ iff $a=a'$ and $b=b'$.
\end{exercise}

\begin{exercise}
  Prove that $(a,(b,c))=(d,(e,f))$ iff $a=d\wedge b=e\wedge c=f$.
\end{exercise}

\begin{definition}
  \textbf{An ordered $n$-tuple} or simply \textbf{a tuple} is defined as:
  $$(a_1,a_2,\dots, a_n) := (a_1, (a_2, (..., a_n)) \dots ).$$

  It's single most important property is that:
  $$(a_1,a_2,\dots,a_n)=(a_1', a_2', \dots, a_n')$$ iff $a_1=a_1', a_2=a_2', \dots, a_n=a_n'.$
\end{definition}

In fact the property is much more important than the explicit construction. For example we could define a 3-tuple as $((a,b),c)$ instead of $(a, (b,c))$ and
the property would still hold! But one needs to be careful about the notation, as shows the next exercise.

\begin{exercise}
  Check that, in terms of sets, $(a,(b,c))\neq ((a,b),c)$, so formally we do need to stick to one convention for $(a,b,c)$.
\end{exercise}

\begin{definition}
  Let $A$ and $B$ be sets. Then we assume that their
  \textbf{Cartesian product} exists:
  $$A\times B = \{(a,b) : a\in A\wedge b\in B\}.$$
\end{definition}

\begin{exercise}
  Prove that Cartesian product is \textit{not} commutative (that is $A\times B\neq B\times A$ in general).
\end{exercise}

\begin{exercise}
  Prove that in general $(A\times B)\times C\neq A\times (B\times C)$, so Cartesian product is \textit{not} associative and an expression $A\times B\times C$ is ambiguous.
\end{exercise}

Later we will formally address this issue\commentforexperts{With the help of natural isomorphisms, a concept from the category theory}. As it is easy to identify $((a, b), c)$ with $(a,(b,c))$, many authors do this identification without saying this explicitly.

% \begin{definition}
%   We define a \textbf{square} of a set $X$ as:
%   $$X^2 = X\times X,$$
%   that is a set of all pairs made from elements of $X$.
%   Similarily, we define $X^n$ as the collection of all $n$-tuples made from elements of $X$.
% \end{definition}
